% ══════════════════════════════════════════════════════════════════
% CONFIGURACIÓN DE PAQUETES Y ESTILO DEL DOCUMENTO
% ══════════════════════════════════════════════════════════════════

% Configuración de página
\usepackage{geometry}
\geometry{left=3cm, right=3cm, top=2.54cm, bottom=2.54cm}

% Configuración de fuentes y idioma
\usepackage{fontspec}
\usepackage[spanish,es-lcroman]{babel}
\usepackage{csquotes}

% Configuración de títulos y tabla de contenidos
\usepackage{titlesec}
\usepackage{tocloft}
\usepackage[hidelinks,hypertexnames=false]{hyperref}

% Para las tablas:
\usepackage{tabularx}
\usepackage{array}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{graphicx}
\usepackage{float}

% Para las listas:
\usepackage{enumitem}

% Microtipo:
\usepackage{microtype}
\microtypesetup{patch=none}

% Interlineado 1.5:
\usepackage{setspace}
\onehalfspacing

% Espaciado de párrafos (anterior: 0, posterior: 10pt):
\setlength{\parskip}{10pt}
\setlength{\parindent}{0pt}

% Configuración del tipo de letra para LuaTeX:
% TeX Gyre Termes es un clon de Times New Roman con soporte completo de small caps
\setmainfont{TeX Gyre Termes}

% Configuración de encabezados y pies de página:
% Sin encabezados, números de página centrados abajo
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{} % Limpiar encabezados y pies
\renewcommand{\headrulewidth}{0pt} % Sin línea en el encabezado
\fancyfoot[C]{\thepage} % Número de página centrado abajo

% Referencias Bibliográficas con Biber:
\usepackage[backend=biber, style=apa, sorting=nyt]{biblatex}
\addbibresource{bibliography/referencias.bib} % Enlazar el archivo .bib
\addbibresource{bibliography/tesis_metodologia_desarrollo.bib}
\addbibresource{bibliography/sistematizacion_preescritura.bib}
\addbibresource{bibliography/planteamiento_problema.bib}

% Estilos de secciones (16pt, negrita, centrado)
\titleformat{\section}[block]
{\normalfont\fontsize{16}{19.2}\selectfont\bfseries\centering}{\thesection}{1em}{}
\titlespacing*{\section}{0pt}{0pt}{0pt}

% Estilos de subsecciones (14pt, negrita, izquierda)
\titleformat{\subsection}[block]
{\normalfont\fontsize{14}{16.8}\selectfont\bfseries}{\thesubsection}{1em}{}
\titlespacing*{\subsection}{0pt}{0pt}{0pt}

% Estilos de subsubsecciones (12pt, negrita, izquierda)
\titleformat{\subsubsection}[block]
{\normalfont\fontsize{12}{14.4}\selectfont\bfseries}{\thesubsubsection}{1em}{}
\titlespacing*{\subsubsection}{0pt}{0pt}{0pt}

% Configuración de Índice (ToC spacing control)
\renewcommand{\cftparfillskip}{\fill}

% Sobre el interlineado de los índices (ToC y LoF):
\setlength{\cftbeforesecskip}{2pt}
\setlength{\cftbeforesubsecskip}{2pt}
\setlength{\cftbeforesubsubsecskip}{2pt}
\setlength{\cftbeforefigskip}{2pt}

% Espaciado antes y después del título del ToC, LoF y LoT:
\renewcommand{\cftbeforetoctitleskip}{0pt}
\renewcommand{\cftaftertoctitleskip}{0pt}
\renewcommand{\cftbeforeloftitleskip}{0pt}
\renewcommand{\cftafterloftitleskip}{0pt}
\renewcommand{\cftbeforelottitleskip}{0pt}
\renewcommand{\cftafterlottitleskip}{0pt}
\setlength{\cftbeforetabskip}{2pt}

% Centrar títulos del ToC, LoF y LoT (16pt, sin negrita):
\renewcommand{\cfttoctitlefont}{\hfill\normalfont\fontsize{16}{19.2}\selectfont}
\renewcommand{\cftaftertoctitle}{\hfill}
\renewcommand{\cftloftitlefont}{\hfill\normalfont\fontsize{16}{19.2}\selectfont}
\renewcommand{\cftafterloftitle}{\hfill}
\renewcommand{\cftlottitlefont}{\hfill\normalfont\fontsize{16}{19.2}\selectfont}
\renewcommand{\cftafterlottitle}{\hfill}

% Remover negrita de las entradas del ToC, LoF y LoT:
\renewcommand{\cftsecfont}{\normalfont}
\renewcommand{\cftsecpagefont}{\normalfont}
\renewcommand{\cftfigfont}{\normalfont}
\renewcommand{\cftfigpagefont}{\normalfont}
\renewcommand{\cfttabfont}{\normalfont}
\renewcommand{\cfttabpagefont}{\normalfont}

% Renombrar títulos de listas:
\addto\captionsspanish{\renewcommand{\listfigurename}{Lista de gráficos}}
\addto\captionsspanish{\renewcommand{\listtablename}{Lista de tablas}}
\addto\captionsspanish{\renewcommand{\tablename}{Tabla}}

% Comando personalizado para secciones sin negrita (para Resumen y Abstract)
% Uso: \sectionplain{Resumen} en lugar de \section*{Resumen}
\newcommand{\sectionplain}[1]{%
	\par\noindent%
	\begin{center}%
		\normalfont\fontsize{16}{19.2}\selectfont #1%
	\end{center}%
	\vspace{-\parskip}% Compensar el espacio de párrafo
	\par%
}
